<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Statistics Chatbot</title>
  </head>

  <body>
    <h2>Statistics Chatbot</h2>

    <textarea id="chat" rows="15" cols="60" readonly></textarea><br><br>

    <input id="input" type="text" placeholder="Ask something..." size="50" />
    <button onclick="sendMessage()">Send</button>

    <script>
      async function sendMessage() {
        const userText = document.getElementById("input").value;

        document.getElementById("chat").value += "You: " + userText + "\n";

        const response = await fetch("/.netlify/functions/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: userText })
        });

        const data = await response.json();
        const botReply =
          data?.choices?.[0]?.message?.content || "(No response)";

        document.getElementById("chat").value += "Bot: " + botReply + "\n\n";
        document.getElementById("input").value = "";
      }
    </script>
  </body>
</html>
